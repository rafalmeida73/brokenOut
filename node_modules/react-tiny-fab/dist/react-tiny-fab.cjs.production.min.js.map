{"version":3,"file":"react-tiny-fab.cjs.production.min.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { useState } from 'react';\n\nimport './styles.scss';\n\ninterface ABProps extends React.HTMLAttributes<HTMLButtonElement> {\n  text?: string;\n  onClick?: (e: React.FormEvent) => void;\n  'data-testid'?: string;\n}\n\nconst AB: React.FC<ABProps> = ({ children, ...p }) => (\n  <button type=\"button\" {...p} className=\"rtf--ab\">\n    {children}\n  </button>\n);\n\ninterface MBProps extends Omit<React.HTMLAttributes<HTMLButtonElement>, 'tabIndex'> {\n  tabIndex?: number;\n}\n\nexport const MB: React.FC<MBProps> = ({ children, ...p }) => (\n  <button type=\"button\" className=\"rtf--mb\" {...p}>\n    {children}\n  </button>\n);\n\nconst defaultStyles: React.CSSProperties = { bottom: 24, right: 24 };\n\ninterface FabProps {\n  event?: 'hover' | 'click';\n  style?: React.CSSProperties;\n  alwaysShowTitle?: boolean;\n  icon?: React.ReactNode;\n  mainButtonStyles?: React.CSSProperties;\n  onClick?: (e: React.FormEvent) => void;\n  text?: string;\n  children?: React.ReactNode;\n}\n\nconst Fab: React.FC<FabProps> = ({\n  event = 'hover',\n  style = defaultStyles,\n  alwaysShowTitle = false,\n  children,\n  icon,\n  mainButtonStyles,\n  onClick,\n  text,\n  ...p\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const ariaHidden = alwaysShowTitle || !isOpen;\n  const open = () => setIsOpen(true);\n  const close = () => setIsOpen(false);\n  const enter = () => event === 'hover' && open();\n  const leave = () => event === 'hover' && close();\n  const toggle = (e: React.FormEvent) => {\n    if (onClick) {\n      return onClick(e);\n    }\n    e.persist();\n    return event === 'click' ? (isOpen ? close() : open()) : null;\n  };\n\n  const actionOnClick = (e: React.FormEvent, userFunc: (e: React.FormEvent) => void) => {\n    e.persist();\n    setIsOpen(false);\n    setTimeout(() => {\n      userFunc(e);\n    }, 1);\n  };\n\n  const rc = () =>\n    React.Children.map(children, (ch, i) => {\n      if (React.isValidElement<ABProps>(ch)) {\n        return (\n          <li className={`rtf--ab__c ${'top' in style ? 'top' : ''}`}>\n            {React.cloneElement(ch, {\n              'data-testid': `action-button-${i}`,\n              'aria-label': ch.props.text || `Menu button ${i + 1}`,\n              'aria-hidden': ariaHidden,\n              tabIndex: isOpen ? 0 : -1,\n              ...ch.props,\n              onClick: (e: React.FormEvent) => {\n                if (ch.props.onClick) actionOnClick(e, ch.props.onClick);\n              },\n            })}\n            {ch.props.text && (\n              <span\n                className={`${'right' in style ? 'right' : ''} ${\n                  alwaysShowTitle ? 'always-show' : ''\n                }`}\n                aria-hidden={ariaHidden}\n              >\n                {ch.props.text}\n              </span>\n            )}\n          </li>\n        );\n      }\n      return null;\n    });\n\n  return (\n    <ul\n      onMouseEnter={enter}\n      onMouseLeave={leave}\n      className={`rtf ${isOpen ? 'open' : 'closed'}`}\n      data-testid=\"fab\"\n      style={style}\n      {...p}\n    >\n      <li className=\"rtf--mb__c\">\n        <MB\n          onClick={toggle}\n          style={mainButtonStyles}\n          data-testid=\"main-button\"\n          role=\"button\"\n          aria-label=\"Floating menu\"\n          tabIndex={0}\n        >\n          {icon}\n        </MB>\n        {text && (\n          <span\n            className={`${'right' in style ? 'right' : ''} ${alwaysShowTitle ? 'always-show' : ''}`}\n            aria-hidden={ariaHidden}\n          >\n            {text}\n          </span>\n        )}\n        <ul>{rc()}</ul>\n      </li>\n    </ul>\n  );\n};\n\nexport { Fab, AB as Action };\n"],"names":["css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","MB","children","p","React","className","defaultStyles","bottom","right","event","alwaysShowTitle","icon","mainButtonStyles","onClick","text","useState","isOpen","setIsOpen","ariaHidden","open","close","onMouseEnter","onMouseLeave","e","persist","role","tabIndex","Children","map","ch","i","isValidElement","cloneElement","props","userFunc","setTimeout","actionOnClick"],"mappings":"weAAA,SAAqBA,EAAKC,QACX,IAARA,IAAiBA,EAAM,IAC5B,IAAIC,EAAWD,EAAIC,SAEnB,GAAgC,oBAAbC,SAAnB,CAEA,IAAIC,EAAOD,SAASC,MAAQD,SAASE,qBAAqB,QAAQ,GAC9DC,EAAQH,SAASI,cAAc,SACnCD,EAAME,KAAO,WAEI,QAAbN,GACEE,EAAKK,WACPL,EAAKM,aAAaJ,EAAOF,EAAKK,YAKhCL,EAAKO,YAAYL,GAGfA,EAAMM,WACRN,EAAMM,WAAWC,QAAUb,EAE3BM,EAAMK,YAAYR,SAASW,eAAed,o7HCHjCe,EAAwB,gBAAGC,IAAAA,SAAaC,2BACnDC,wCAAQV,KAAK,SAASW,UAAU,WAAcF,GAC3CD,IAICI,EAAqC,CAAEC,OAAQ,GAAIC,MAAO,mBAhBlC,gBAAGN,IAAAA,SAAaC,2BAC5CC,wCAAQV,KAAK,UAAaS,GAAGE,UAAU,YACpCH,gBA2B2B,oBAC9BO,MAAAA,aAAQ,cACRjB,MAAAA,aAAQc,QACRI,gBAAAA,gBACAR,IAAAA,SACAS,IAAAA,KACAC,IAAAA,iBACAC,IAAAA,QACAC,IAAAA,KACGX,mGAEyBY,YAAS,GAA9BC,OAAQC,OACTC,EAAaR,IAAoBM,EACjCG,EAAO,kBAAMF,GAAU,IACvBG,EAAQ,kBAAMH,GAAU,WAmD5Bb,oCACEiB,aAnDU,iBAAgB,UAAVZ,GAAqBU,KAoDrCG,aAnDU,iBAAgB,UAAVb,GAAqBW,KAoDrCf,kBAAkBW,EAAS,OAAS,wBACxB,MACZxB,MAAOA,GACHW,GAEJC,sBAAIC,UAAU,cACZD,gBAACH,GACCY,QA1DO,SAACU,UACVV,EACKA,EAAQU,IAEjBA,EAAEC,UACe,UAAVf,EAAqBO,EAASI,IAAUD,IAAU,OAsDnD3B,MAAOoB,gBACK,cACZa,KAAK,sBACM,gBACXC,SAAU,GAETf,GAEFG,GACCV,wBACEC,WAAc,UAAWb,EAAQ,QAAU,SAAMkB,EAAkB,cAAgB,kBACtEQ,GAEZJ,GAGLV,0BA1DJA,EAAMuB,SAASC,IAAI1B,GAAU,SAAC2B,EAAIC,UAC5B1B,EAAM2B,eAAwBF,GAE9BzB,sBAAIC,yBAAyB,QAASb,EAAQ,MAAQ,KACnDY,EAAM4B,aAAaH,oCACcC,eAClBD,EAAGI,MAAMnB,sBAAuBgB,EAAI,iBACnCZ,EACfQ,SAAUV,EAAS,GAAK,GACrBa,EAAGI,OACNpB,QAAS,SAACU,GACJM,EAAGI,MAAMpB,SApBL,SAACU,EAAoBW,GACzCX,EAAEC,UACFP,GAAU,GACVkB,YAAW,WACTD,EAASX,KACR,GAe+Ba,CAAcb,EAAGM,EAAGI,MAAMpB,aAGnDgB,EAAGI,MAAMnB,MACRV,wBACEC,WAAc,UAAWb,EAAQ,QAAU,SACzCkB,EAAkB,cAAgB,kBAEvBQ,GAEZW,EAAGI,MAAMnB,OAMb"}