{"version":3,"file":"react-tiny-fab.cjs.development.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useState } from 'react';\n\nimport './styles.scss';\n\ninterface ABProps extends React.HTMLAttributes<HTMLButtonElement> {\n  text?: string;\n  onClick?: (e: React.FormEvent) => void;\n  'data-testid'?: string;\n}\n\nconst AB: React.FC<ABProps> = ({ children, ...p }) => (\n  <button type=\"button\" {...p} className=\"rtf--ab\">\n    {children}\n  </button>\n);\n\ninterface MBProps extends Omit<React.HTMLAttributes<HTMLButtonElement>, 'tabIndex'> {\n  tabIndex?: number;\n}\n\nexport const MB: React.FC<MBProps> = ({ children, ...p }) => (\n  <button type=\"button\" className=\"rtf--mb\" {...p}>\n    {children}\n  </button>\n);\n\nconst defaultStyles: React.CSSProperties = { bottom: 24, right: 24 };\n\ninterface FabProps {\n  event?: 'hover' | 'click';\n  style?: React.CSSProperties;\n  alwaysShowTitle?: boolean;\n  icon?: React.ReactNode;\n  mainButtonStyles?: React.CSSProperties;\n  onClick?: (e: React.FormEvent) => void;\n  text?: string;\n  children?: React.ReactNode;\n}\n\nconst Fab: React.FC<FabProps> = ({\n  event = 'hover',\n  style = defaultStyles,\n  alwaysShowTitle = false,\n  children,\n  icon,\n  mainButtonStyles,\n  onClick,\n  text,\n  ...p\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const ariaHidden = alwaysShowTitle || !isOpen;\n  const open = () => setIsOpen(true);\n  const close = () => setIsOpen(false);\n  const enter = () => event === 'hover' && open();\n  const leave = () => event === 'hover' && close();\n  const toggle = (e: React.FormEvent) => {\n    if (onClick) {\n      return onClick(e);\n    }\n    e.persist();\n    return event === 'click' ? (isOpen ? close() : open()) : null;\n  };\n\n  const actionOnClick = (e: React.FormEvent, userFunc: (e: React.FormEvent) => void) => {\n    e.persist();\n    setIsOpen(false);\n    setTimeout(() => {\n      userFunc(e);\n    }, 1);\n  };\n\n  const rc = () =>\n    React.Children.map(children, (ch, i) => {\n      if (React.isValidElement<ABProps>(ch)) {\n        return (\n          <li className={`rtf--ab__c ${'top' in style ? 'top' : ''}`}>\n            {React.cloneElement(ch, {\n              'data-testid': `action-button-${i}`,\n              'aria-label': ch.props.text || `Menu button ${i + 1}`,\n              'aria-hidden': ariaHidden,\n              tabIndex: isOpen ? 0 : -1,\n              ...ch.props,\n              onClick: (e: React.FormEvent) => {\n                if (ch.props.onClick) actionOnClick(e, ch.props.onClick);\n              },\n            })}\n            {ch.props.text && (\n              <span\n                className={`${'right' in style ? 'right' : ''} ${\n                  alwaysShowTitle ? 'always-show' : ''\n                }`}\n                aria-hidden={ariaHidden}\n              >\n                {ch.props.text}\n              </span>\n            )}\n          </li>\n        );\n      }\n      return null;\n    });\n\n  return (\n    <ul\n      onMouseEnter={enter}\n      onMouseLeave={leave}\n      className={`rtf ${isOpen ? 'open' : 'closed'}`}\n      data-testid=\"fab\"\n      style={style}\n      {...p}\n    >\n      <li className=\"rtf--mb__c\">\n        <MB\n          onClick={toggle}\n          style={mainButtonStyles}\n          data-testid=\"main-button\"\n          role=\"button\"\n          aria-label=\"Floating menu\"\n          tabIndex={0}\n        >\n          {icon}\n        </MB>\n        {text && (\n          <span\n            className={`${'right' in style ? 'right' : ''} ${alwaysShowTitle ? 'always-show' : ''}`}\n            aria-hidden={ariaHidden}\n          >\n            {text}\n          </span>\n        )}\n        <ul>{rc()}</ul>\n      </li>\n    </ul>\n  );\n};\n\nexport { Fab, AB as Action };\n"],"names":["AB","children","p","React","type","className","MB","defaultStyles","bottom","right","Fab","event","style","alwaysShowTitle","icon","mainButtonStyles","onClick","text","useState","isOpen","setIsOpen","ariaHidden","open","close","enter","leave","toggle","e","persist","actionOnClick","userFunc","setTimeout","rc","Children","map","ch","i","isValidElement","cloneElement","props","tabIndex","onMouseEnter","onMouseLeave","role"],"mappings":"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"}